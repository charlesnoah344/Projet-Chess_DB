<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d" d:DesignWidth="1000" d:DesignHeight="700"
             Foreground="{DynamicResource PrimaryForeground}"
             Background="{DynamicResource PrimaryBackground}"
             xmlns:vm="clr-namespace:Chess_D_B.ViewModels"
             x:DataType="vm:CreateCompetitionPageViewModel"
             x:Class="Chess_D_B.Views.CreateCompetitionPageView">
    
    <Grid RowDefinitions="Auto, Auto, *, Auto">
        
        <!-- Header -->
        <Border Grid.Row="0" Background="#16a085" Padding="20">
            <TextBlock Text="ðŸ† CrÃ©er une Nouvelle CompÃ©tition" 
                       FontSize="28" 
                       FontWeight="Bold"
                       Foreground="White"
                       HorizontalAlignment="Center"/>
        </Border>
        
        
        <!-- Contenu -->
        <ScrollViewer Grid.Row="2">
            <Grid ColumnDefinitions="1.2*, *" Margin="20" ColumnSpacing="20">
                
                <!-- Colonne gauche : Formulaire -->
                <Border Grid.Column="0" 
                        BorderBrush="#16a085" 
                        BorderThickness="2" 
                        CornerRadius="5"
                        Padding="20">
                    <StackPanel Spacing="15">
                        
                        <TextBlock Text="ðŸ“‹ Informations de la compÃ©tition" 
                                   FontSize="18" 
                                   FontWeight="Bold"
                                   Foreground="#16a085"
                                   Margin="0,0,0,10"/>
                        
                        <!-- Nom -->
                        <StackPanel Spacing="8">
                            <TextBlock Text="Nom de la compÃ©tition *" FontWeight="Bold" FontSize="14"/>
                            <TextBox Text="{Binding Tournoi}" 
                                     Watermark="Ex: Championnat d'Ã©checs 2024" 
                                     Background="#333B5A" 
                                     Height="40"
                                     IsEnabled="{Binding EstPasEnChargement}"/>
                        </StackPanel>
                        
                        <!-- Lieu -->
                        <StackPanel Spacing="8">
                            <TextBlock Text="Lieu *" FontWeight="Bold" FontSize="14"/>
                            <TextBox Text="{Binding Ville}" 
                                     Watermark="Ex: Bruxelles, Belgique" 
                                     Background="#333B5A" 
                                     Height="40"
                                     IsEnabled="{Binding EstPasEnChargement}"/>
                        </StackPanel>
                        
                        <!-- Dates -->
                        <Grid ColumnDefinitions="*, *" ColumnSpacing="10">
                            <StackPanel Grid.Column="0" Spacing="8">
                                <TextBlock Text="Date de dÃ©but *" FontWeight="Bold" FontSize="14"/>
                                <DatePicker SelectedDate="{Binding DateDebut}" 
                                            Height="40" 
                                            Background="#333B5A"
                                            IsEnabled="{Binding EstPasEnChargement}"/>
                            </StackPanel>
                            
                            <StackPanel Grid.Column="1" Spacing="8">
                                <TextBlock Text="Date de fin *" FontWeight="Bold" FontSize="14"/>
                                <DatePicker SelectedDate="{Binding DateFin}" 
                                            Height="40" 
                                            Background="#333B5A"
                                            IsEnabled="{Binding EstPasEnChargement}"/>
                            </StackPanel>
                        </Grid>
                        
                       
                        
                        <!-- Boutons d'action -->
                        <Grid ColumnDefinitions="*, *" Margin="0,20,0,0" ColumnSpacing="10">
                            <Button Grid.Column="0"
                                    Content="â† Retour"
                                    Command="{Binding RetourCommand}"
                                    HorizontalAlignment="Stretch"
                                    Height="45"
                                    IsEnabled="{Binding EstPasEnChargement}"/>
                            
                            <Button Grid.Column="1"
                                    Content="âœ“ CrÃ©er la compÃ©tition"
                                    Command="{Binding EnregistrerCommand}"
                                    HorizontalAlignment="Stretch"
                                    Height="45"
                                    Classes="menu"
                                    IsEnabled="{Binding !EstPasEnChargement}"/>
                        </Grid>
                        
                    </StackPanel>
                </Border>
                
                <!-- Colonne droite : SÃ©lection des joueurs -->
                <Border Grid.Column="1" 
                        BorderBrush="#16a085" 
                        BorderThickness="2" 
                        CornerRadius="5"
                        Padding="20">
                    <StackPanel Spacing="15">
                        
                        <TextBlock Text="ðŸ‘¥ Joueurs participants" 
                                   FontSize="18" 
                                   FontWeight="Bold"
                                   Foreground="#16a085"/>
                        
                        <TextBlock Text="SÃ©lectionnez les joueurs qui participeront" 
                                   FontSize="12" 
                                   Foreground="#95a5a6"
                                   TextWrapping="Wrap"/>
                        
                        <!-- Boutons de sÃ©lection rapide -->
                        <Grid ColumnDefinitions="*, *" ColumnSpacing="10">
                            <Button Grid.Column="0"
                                    Content="âœ“ Tout sÃ©lectionner"
                                    Command="{Binding SelectionnerTousCommand}"
                                    CommandParameter="True"
                                    Height="35"
                                    Background="#27ae60"
                                    HorizontalAlignment="Stretch"/>
                            
                            <Button Grid.Column="1"
                                    Content="âœ— Tout dÃ©sÃ©lectionner"
                                    Command="{Binding SelectionnerTousCommand}"
                                    CommandParameter="False"
                                    Height="35"
                                    Background="#e74c3c"
                                    HorizontalAlignment="Stretch"/>
                        </Grid>
                        
                        <!-- Liste des joueurs avec cases Ã  cocher -->
                        <ScrollViewer Height="400">
                            <ItemsControl ItemsSource="{Binding JoueursDisponibles}">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Border Background="#34495E" 
                                                Padding="10" 
                                                Margin="0,0,0,5"
                                                CornerRadius="3">
                                            <CheckBox IsChecked="{Binding EstSelectionne}">
                                                <StackPanel Spacing="3">
                                                    <TextBlock>
                                                        <Run Text="{Binding Joueur.Prenom}" FontWeight="Bold"/>
                                                        <Run Text=" "/>
                                                        <Run Text="{Binding Joueur.Nom}" FontWeight="Bold"/>
                                                    </TextBlock>
                                                    <TextBlock Text="{Binding Joueur.Elo, StringFormat='ELO: {0}'}" 
                                                               FontSize="11" 
                                                               Foreground="#3498db"/>
                                                </StackPanel>
                                            </CheckBox>
                                        </Border>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </ScrollViewer>
                        
                    </StackPanel>
                </Border>
                
            </Grid>
        </ScrollViewer>
        
        <!-- Footer -->
        <StackPanel Grid.Row="3" Margin="20" Spacing="10">
            <ProgressBar IsIndeterminate="True" 
                         IsVisible="{Binding EstEnChargement}"
                         Height="4"/>
        </StackPanel>
        
    </Grid>
</UserControl>